name: 1b-5xC-final-superswarm-fixed-source-weights-dclm-stackedu-pstar
description: Cookbook 1Bv2-5xC on final superswarm (pes2o/s2pdf final) with fixed source weights and using p* for DCLM/stack-edu
budget: ai2/oe-data
workspace: ai2/dolma2
nodes: 8
gpus: 8
preemptible: true
max_tokens: 127939584000
sequence_length: 4096
seed: 1337
model: olmo2_1B_v2
tokenizer: dolma2
priority: urgent
cluster: ai2/augusta-google-1
weka: false
rank_microbatch_size: 32768
global_batch_size: 2097152
metrics_config:
  project: olmo-cookbook
  entity: ai2-llm
dataset:
  sources:
  - name: finemath-3plus
    paths:
    - s3://ai2-llm/preprocessed/finemath/finemath-3plus/allenai/dolma2-tokenizer/*.npy
    target_ratio: 0.025340376929054265
  - name: arxiv
    paths:
    - s3://ai2-llm/preprocessed/proof-pile-2/v0_decontaminated/arxiv/train/allenai/dolma2-tokenizer/*.npy
    target_ratio: 0.008284928006565282
  - name: wikipedia
    paths:
    - s3://ai2-llm/preprocessed/structured-wikipedia/concat_with_links/allenai/dolma2-tokenizer/*.npy
    target_ratio: 0.000416156026289699
  - name: dclm:adult_content
    weight: 0.0008604637538225815
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/adult_content/**/*.npy
    target_ratio: 0.0008604637538225815
  - name: dclm:art_and_design
    weight: 0.009398751445974386
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/art_and_design/**/*.npy
    target_ratio: 0.009398751445974386
  - name: dclm:crime_and_law
    weight: 0.021986819214341986
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/crime_and_law/**/*.npy
    target_ratio: 0.021986819214341986
  - name: dclm:education_and_jobs
    weight: 0.03224661303882607
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/education_and_jobs/**/*.npy
    target_ratio: 0.03224661303882607
  - name: dclm:electronics_and_hardware
    weight: 0.025964764527542712
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/electronics_and_hardware/**/*.npy
    target_ratio: 0.025964764527542712
  - name: dclm:entertainment
    weight: 0.0721878460727074
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/entertainment/**/*.npy
    target_ratio: 0.0721878460727074
  - name: dclm:fashion_and_beauty
    weight: 9.576687137425161e-05
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/fashion_and_beauty/**/*.npy
    target_ratio: 9.576687137425161e-05
  - name: dclm:finance_and_business
    weight: 0.030587142205702345
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/finance_and_business/**/*.npy
    target_ratio: 0.030587142205702345
  - name: dclm:food_and_dining
    weight: 0.010593864751442271
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/food_and_dining/**/*.npy
    target_ratio: 0.010593864751442271
  - name: dclm:games
    weight: 0.05182771081249327
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/games/**/*.npy
    target_ratio: 0.05182771081249327
  - name: dclm:health
    weight: 0.07477279279505238
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/health/**/*.npy
    target_ratio: 0.07477279279505238
  - name: dclm:history_and_geography
    weight: 0.0203801788652269
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/history_and_geography/**/*.npy
    target_ratio: 0.0203801788652269
  - name: dclm:home_and_hobbies
    weight: 0.006939006735919603
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/home_and_hobbies/**/*.npy
    target_ratio: 0.006939006735919603
  - name: dclm:industrial
    weight: 0.015745768366251897
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/industrial/**/*.npy
    target_ratio: 0.011842017344805071
  - name: dclm:literature
    weight: 0.0682512927464629
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/literature/**/*.npy
    target_ratio: 0.05133017161876191
  - name: dclm:politics
    weight: 0.02170366281584968
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/politics/**/*.npy
    target_ratio: 0.016322807851152987
  - name: dclm:religion
    weight: 0.019765203386769094
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/religion/**/*.npy
    target_ratio: 0.014864938686090609
  - name: dclm:science_math_and_technology
    weight: 0.2102541083699082
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/science_math_and_technology/**/*.npy
    target_ratio: 0.15812710692921586
  - name: dclm:social_life
    weight: 0.00464628155954837
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/social_life/**/*.npy
    target_ratio: 0.0034943576926323707
  - name: dclm:software
    weight: 0.04733898713026143
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/software/**/*.npy
    target_ratio: 0.03560252466837869
  - name: dclm:software_development
    weight: 0.11142142430705981
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/software_development/**/*.npy
    target_ratio: 0.08379739930984194
  - name: dclm:sports_and_fitness
    weight: 0.013072140601763493
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/sports_and_fitness/**/*.npy
    target_ratio: 0.009831245585423433
  - name: dclm:transportation
    weight: 0.009798609444870071
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/transportation/**/*.npy
    target_ratio: 0.007369300773522243
  - name: dclm:travel_and_tourism
    weight: 0.002197370171511048
    paths:
    - s3://ai2-llm/preprocessed/dclm/baseline_topic_ft_lr05_ng2_n3M6_ova_20pct/allenai/dolma2-tokenizer/travel_and_tourism/**/*.npy
    target_ratio: 0.0016525897675316306
  - name: s2pdf:adult_content
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/adult_content/**/*.npy
    target_ratio: 3.9575896235840784e-05
  - name: s2pdf:art_and_design
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/art_and_design/**/*.npy
    target_ratio: 0.0008942892695810959
  - name: s2pdf:crime_and_law
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/crime_and_law/**/*.npy
    target_ratio: 0.0055497436156078574
  - name: s2pdf:education_and_jobs
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/education_and_jobs/**/*.npy
    target_ratio: 0.01783334682146048
  - name: s2pdf:electronics_and_hardware
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/electronics_and_hardware/**/*.npy
    target_ratio: 0.000936643085600849
  - name: s2pdf:entertainment
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/entertainment/**/*.npy
    target_ratio: 0.0007819472765313163
  - name: s2pdf:fashion_and_beauty
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/fashion_and_beauty/**/*.npy
    target_ratio: 7.260302670632037e-05
  - name: s2pdf:finance_and_business
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/finance_and_business/**/*.npy
    target_ratio: 0.007897214829871877
  - name: s2pdf:food_and_dining
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/food_and_dining/**/*.npy
    target_ratio: 0.0003003232565415761
  - name: s2pdf:games
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/games/**/*.npy
    target_ratio: 0.000321738487696413
  - name: s2pdf:health
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/health/**/*.npy
    target_ratio: 0.014042651977622545
  - name: s2pdf:history_and_geography
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/history_and_geography/**/*.npy
    target_ratio: 0.0034056664789245236
  - name: s2pdf:home_and_hobbies
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/home_and_hobbies/**/*.npy
    target_ratio: 0.0005063148935928077
  - name: s2pdf:industrial
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/industrial/**/*.npy
    target_ratio: 0.0037692952677219164
  - name: s2pdf:literature
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/literature/**/*.npy
    target_ratio: 0.004183713167551289
  - name: s2pdf:politics
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/politics/**/*.npy
    target_ratio: 0.005131209722283989
  - name: s2pdf:religion
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/religion/**/*.npy
    target_ratio: 0.0032450006062779728
  - name: s2pdf:science_math_and_technology
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/science_math_and_technology/**/*.npy
    target_ratio: 0.0552676426470565
  - name: s2pdf:social_life
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/social_life/**/*.npy
    target_ratio: 0.00041457938507262634
  - name: s2pdf:software_development
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/software_development/**/*.npy
    target_ratio: 0.005370192419664398
  - name: s2pdf:software
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/software/**/*.npy
    target_ratio: 0.0011749770199943259
  - name: s2pdf:sports_and_fitness
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/sports_and_fitness/**/*.npy
    target_ratio: 0.0007041820613179011
  - name: s2pdf:transportation
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/transportation/**/*.npy
    target_ratio: 0.002204631977920263
  - name: s2pdf:travel_and_tourism
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2pdfs/allenai/dolma2-tokenizer/travel_and_tourism/**/*.npy
    target_ratio: 0.0002726569838243161
  - name: stack-edu:C
    weight: 0.040545413474083136
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/C/**/*.npy
    target_ratio: 0.002763955092668443
  - name: stack-edu:Cpp
    weight: 0.11992423990590854
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Cpp/**/*.npy
    target_ratio: 0.008175159289822079
  - name: stack-edu:CSharp
    weight: 0.06145614902228962
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/CSharp/**/*.npy
    target_ratio: 0.004189426657950472
  - name: stack-edu:Go
    weight: 0.013141668585880971
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Go/**/*.npy
    target_ratio: 0.0008958592033430481
  - name: stack-edu:Java
    weight: 0.15971742894160593
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Java/**/*.npy
    target_ratio: 0.010887835720142314
  - name: stack-edu:JavaScript
    weight: 0.08711993898613768
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/JavaScript/**/*.npy
    target_ratio: 0.005938910924847695
  - name: stack-edu:Markdown
    weight: 0.16641522916681814
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Markdown/**/*.npy
    target_ratio: 0.011344420508801195
  - name: stack-edu:PHP
    weight: 0.060681232466575974
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/PHP/**/*.npy
    target_ratio: 0.00413660108837213
  - name: stack-edu:Python
    weight: 0.18292382056422074
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Python/**/*.npy
    target_ratio: 0.012469800702415441
  - name: stack-edu:Ruby
    weight: 0.01313841950835558
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Ruby/**/*.npy
    target_ratio: 0.0008956377157911078
  - name: stack-edu:Rust
    weight: 0.014023586747942062
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Rust/**/*.npy
    target_ratio: 0.0009559790044866142
  - name: stack-edu:Shell
    weight: 0.025543226210598954
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Shell/**/*.npy
    target_ratio: 0.001741265512388847
  - name: stack-edu:SQL
    weight: 0.018239409453020123
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/SQL/**/*.npy
    target_ratio: 0.001243368961501999
  - name: stack-edu:Swift
    weight: 0.014179755937669661
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/Swift/**/*.npy
    target_ratio: 0.0009666249589924527
  - name: stack-edu:TypeScript
    weight: 0.02295048102888894
    paths:
    - s3://ai2-llm/preprocessed/stack-edu/allenai/dolma2-tokenizer/TypeScript/**/*.npy
    target_ratio: 0.0015645197195864218
  - name: pes2o:agricultural-and-food-sciences
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/agricultural-and-food-sciences/**/*.npy
    target_ratio: 0.00026030817970117197
  - name: pes2o:art
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/art/**/*.npy
    target_ratio: 0.00011460500107500974
  - name: pes2o:biology
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/biology/**/*.npy
    target_ratio: 0.0018130400206621115
  - name: pes2o:business
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/business/**/*.npy
    target_ratio: 0.00021119290067654658
  - name: pes2o:chemistry
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/chemistry/**/*.npy
    target_ratio: 0.0004305782933528089
  - name: pes2o:computer-science
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/computer-science/**/*.npy
    target_ratio: 0.001663754150142079
  - name: pes2o:economics
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/economics/**/*.npy
    target_ratio: 0.00029010702152989343
  - name: pes2o:education
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/education/**/*.npy
    target_ratio: 0.00022013298206210083
  - name: pes2o:engineering
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/engineering/**/*.npy
    target_ratio: 0.0004445755789253554
  - name: pes2o:environmental-science
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/environmental-science/**/*.npy
    target_ratio: 0.0004574690651297705
  - name: pes2o:geology
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/geology/**/*.npy
    target_ratio: 0.00013260527326431886
  - name: pes2o:history
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/history/**/*.npy
    target_ratio: 0.00017092815134484002
  - name: pes2o:law
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/law/**/*.npy
    target_ratio: 9.847712502175755e-05
  - name: pes2o:linguistics
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/linguistics/**/*.npy
    target_ratio: 0.00022511240853682394
  - name: pes2o:materials-science
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/materials-science/**/*.npy
    target_ratio: 0.0004985434142391864
  - name: pes2o:mathematics
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/mathematics/**/*.npy
    target_ratio: 0.0013572903187723528
  - name: pes2o:medicine
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/medicine/**/*.npy
    target_ratio: 0.0008787961609668995
  - name: pes2o:philosophy
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/philosophy/**/*.npy
    target_ratio: 0.00011562522532146677
  - name: pes2o:physics
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/physics/**/*.npy
    target_ratio: 0.0011896008006385792
  - name: pes2o:political-science
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/political-science/**/*.npy
    target_ratio: 0.00025403014888988434
  - name: pes2o:psychology
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/psychology/**/*.npy
    target_ratio: 0.0004828094915884945
  - name: pes2o:sociology
    paths:
    - s3://ai2-llm/preprocessed/olmo3-final/s2orc/allenai/dolma2-tokenizer/sociology/**/*.npy
    target_ratio: 8.327077269621086e-05
